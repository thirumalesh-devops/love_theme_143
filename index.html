<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>For Sathya ğŸ’Œ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Styles -->
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- BACKGROUND MUSIC -->
  <audio id="bgMusic" loop preload="auto">
    <source src="https://my-love-proposal-assets.s3.us-east-1.amazonaws.com/WhatsApp+Audio+2026-01-11+at+7.03.05+PM.mpeg" type="audio/mpeg" />
  </audio>

  <!-- DEFAULT LOVE BUBBLES (hidden during night scene) -->
  <div class="bubbles"></div>

  <!-- NIGHT SKY OVERLAY (shown when the letter is open) -->
  <div class="nightSky" id="nightSky" aria-hidden="true">
    <div class="moon" aria-hidden="true"></div>
    <!-- Stars, shooting stars & petals are injected by JS -->
    <div class="plane" aria-hidden="true"></div>
  </div>

  <!-- GLOBAL BACK BUTTON (on every page except first) -->
  <button id="globalBack" class="globalBack" onclick="navBack()" hidden>â† Back</button>

  <!-- LOGIN SCREEN (redesigned) -->
  <section class="loginScreen" id="loginScreen" aria-label="Login">
    <div class="loginCard" role="dialog" aria-modal="true" aria-labelledby="loginTitle">
      <div class="loginHeader">
        <div class="loginHeart" aria-hidden="true">ğŸ’—</div>
        <h1 id="loginTitle">Welcome, SaThya</h1>
        <p class="loginSubtitle">Login to see your surprise</p>
      </div>

      <form class="loginBody" onsubmit="return false" autocomplete="off">
        <label class="loginLabel" for="username">Username</label>
        <div class="inputWrap">
          <input type="text" id="username" name="username" placeholder="Enter username" inputmode="text" autocapitalize="none" autocomplete="username" required />
        </div>

        <label class="loginLabel" for="password">Password</label>
        <div class="inputWrap withToggle">
          <input type="password" id="password" name="password" placeholder="Enter password" autocomplete="current-password" required />
          <button type="button" class="togglePwd" aria-label="Show password" onclick="togglePassword()">ğŸ‘ï¸</button>
        </div>

        <button class="loginBtn" id="loginBtn" onclick="login()">Login</button>

        <p id="loginWait" class="wait" aria-live="polite"></p>
        <p id="loginError" class="error" aria-live="assertive"></p>

        <div class="loginHelp">
          <button type="button" class="miniBtn" onclick="prefillDemo()">Fill Demo</button>
          <span class="sep">â€¢</span>
          <button type="button" class="miniBtn" onclick="startMusic()">Enable Music ğŸµ</button>
        </div>
      </form>
    </div>
  </section>

  <!-- HOME SCREEN -->
  <div class="home" id="homeScreen" style="display:none;">
    <h2 class="welcome">A message from my heart ğŸ’–</h2>
    <h1 class="name">SATHYA</h1>
    <p class="quote">â€œYou are the reason my heart smiles every day.â€</p>
    <p class="question">Will you be my Valentine?</p>
    <div class="buttons">
      <!-- YES opens the love-themed letter popup -->
      <button class="yes" onclick="showMailIcon()">YES ğŸ’Œ</button>
    </div>
  </div>

  <!-- (Optional) MAIL ICON POPUP â€” kept, but YES opens letter directly -->
  <div class="popup" id="mailIconPopup">
    <div class="popupContent">
      <h2>ğŸ’Œ You have a mail!</h2>
      <button onclick="showMailIcon()">Open Mail ğŸ“œ</button>
      <button class="back" onclick="navBack()">Back</button>
    </div>
  </div>

  <!-- LEGACY: TRANSPARENT LETTER POPUP (kept for reference) -->
  <div class="popup transparentOverlay" id="letterPopup" style="display:none;">
    <div class="popupContent letterPanel">
      <h2 class="letterTitle">Love Letter....!</h2>
      <div id="letter"></div>
      <div class="replyWrap">
        <button class="replyBtn" onclick="openReplyPopup()">Reply ğŸ’¬</button>
      </div>
      <div class="midBackWrap">
        <button class="midBack" onclick="navBack()">Back</button>
      </div>
    </div>
  </div>

  <!-- NEW: LOVE-THEME BEAUTIFUL LETTER POPUP -->
  <div class="popup" id="loveLetterPopup" style="display:none;">
    <!-- Floating hearts overlay (below card) -->
    <div class="loveOverlayHearts"></div>

    <div class="popupContent">
      <!-- Cupid arrow that orbits around the card border -->
      <div class="borderArrow" aria-hidden="true"></div>

      <div class="loveHeader">
        <div class="heartBadge" aria-hidden="true"></div>
        <div class="titleText">A Letter from My Heart</div>
      </div>

      <div class="loveBody">
        <!-- Typewriter target -->
        <div id="loveLetterContainer"></div>

        <!-- Reply button -->
        <div class="replyWrap">
          <button class="replyBtn" onclick="openReplyPopup()">Reply ğŸ’¬</button>
        </div>

        <!-- Centered back button -->
        <div class="midBackWrap">
          <button class="midBack" onclick="navBack()">Back</button>
        </div>
      </div>
    </div>
  </div>

  <!-- REPLY POPUP -->
  <div class="popup transparentOverlay" id="replyPopup" style="display:none;">
    <div class="popupContent replyPanel">
      <h2 class="letterTitle">Send your reply</h2>
      <p class="replyHint">Write your message to Thiru. It will be sent privately to his email.</p>
      <textarea id="replyText" rows="6" placeholder="Type your reply here..."></textarea>
      <div class="replyActions">
        <button class="sendReply" id="sendReplyBtn" onclick="sendReply()">Send Reply ğŸ’Œ</button>
        <button class="back" onclick="closeReplyPopup()">Cancel</button>
      </div>
      <p id="replyStatus" class="replyStatus" aria-live="polite"></p>
    </div>
  </div>

  <!-- Toast notifications -->
  <div id="toast" class="toast" aria-live="polite"></div>

  <!-- Script at end -->
  <script src="script.js?v=987654325"></script>
</body>
</html>
``
