<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>For You...!</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Styles -->
  <link rel="stylesheet" href="style.css?v=4" />
</head>
<body>

  <!-- BACKGROUND MUSIC -->
  <audio id="bgMusic" loop preload="auto">
    <source src="https://my-love-proposal-assets.s3.us-east-1.amazonaws.com/WhatsApp+Audio+2026-01-11+at+7.03.05+PM.mpeg" type="audio/mpeg" />
  </audio>

  <!-- DEFAULT LOVE BUBBLES (hidden during night scene) -->
  <div class="bubbles"></div>

  <!-- NIGHT SKY OVERLAY (shown when the letter is open) -->
  <div class="nightSky" id="nightSky" aria-hidden="true">
    <div class="moon" aria-hidden="true"></div>
    <!-- Stars, shooting stars & petals are injected by JS -->
    <div class="plane" aria-hidden="true"></div>
  </div>

  <!-- GLOBAL BACK BUTTON -->
  <button id="globalBack" class="globalBack" onclick="navBack()" hidden>â† Back</button>

  <!-- ===== LOGIN (CENTERED, NO RECTANGLE) ===== -->
  <div class="loginScreen" id="loginScreen">
    <h1>Welcome SaThya</h1>
    <p>Login to see your surprise</p>

    <input type="text" id="username" placeholder="Username" />
    <input type="password" id="password" placeholder="Password" />

    <button onclick="login()">Login</button>

    <p id="loginWait" class="wait"></p>
    <p id="loginError" class="error"></p>
  </div>

  <!-- ===== HOME ===== -->
  <div class="home" id="homeScreen" style="display:none;">
    <h2 class="welcome">A message from my heart ğŸ’–</h2>
    <h1 class="name">SATHYA</h1>
    <p class="quote">â€œYou are the reason my heart smiles every day.â€</p>
    <p class="question">Will you be my Valentine?</p>
    <div class="buttons">
      <button class="yes" onclick="showMailIcon()">YES ğŸ’Œ</button>
    </div>
  </div>

  <!-- Optional mail popup (kept) -->
  <div class="popup" id="mailIconPopup">
    <div class="popupContent">
      <h2>ğŸ’Œ You have a mail!</h2>
      <button onclick="showMailIcon()">Open Mail ğŸ“œ</button>
      <button class="back" onclick="navBack()">Back</button>
    </div>
  </div>

  <!-- Legacy transparent letter popup (kept) -->
  <div class="popup transparentOverlay" id="letterPopup" style="display:none;">
    <div class="popupContent letterPanel">
      <h2 class="letterTitle">Love Letter....!</h2>
      <div id="letter"></div>
      <div class="replyWrap"><button class="replyBtn" onclick="openReplyPopup()">Reply ğŸ’¬</button></div>
      <div class="midBackWrap"><button class="midBack" onclick="navBack()">Back</button></div>
    </div>
  </div>

  <!-- Love-themed letter popup -->
  <div class="popup" id="loveLetterPopup" style="display:none;">
    <div class="loveOverlayHearts"></div>
    <div class="popupContent">
      <div class="borderArrow" aria-hidden="true"></div>

      <div class="loveHeader">
        <div class="heartBadge" aria-hidden="true"></div>
        <div class="titleText">A Letter from My Heart</div>
      </div>

      <div class="loveBody">
        <div id="loveLetterContainer"></div>
        <div class="replyWrap"><button class="replyBtn" onclick="openReplyPopup()">Reply ğŸ’¬</button></div>
        <div class="midBackWrap"><button class="midBack" onclick="navBack()">Back</button></div>
      </div>
    </div>
  </div>

  <!-- Reply popup (saves to server) -->
  <div class="popup transparentOverlay" id="replyPopup" style="display:none;">
    <div class="popupContent replyPanel">
      <h2 class="letterTitle">Send your reply</h2>
      <p class="replyHint">Your reply will be saved privately on the server.</p>
      <textarea id="replyText" rows="6" placeholder="Type your reply here..."></textarea>
      <div class="replyActions">
        <button class="sendReply" id="sendReplyBtn" onclick="sendReply()">Save Reply ğŸ’¾</button>
        <button class="back" onclick="closeReplyPopup()">Cancel</button>
      </div>
      <p id="replyStatus" class="replyStatus" aria-live="polite"></p>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" aria-live="polite"></div>

  <!-- Script -->
  <script src="script.js?v=4"></script>
</body>
</html>
